{% extends 'dashboard/base.html' %}
{% load static %}

{% block content %}
<div class="body-wrapper-inner">
 
        <div class="card w-100 shadow border-0 ">
          <div class="card-header bg-warning text-white">
            <h3 class="mb-1">Update Product</h3>
          </div>

          <div class="card-body">
            <form method="POST" enctype="multipart/form-data">
              {% csrf_token %}
              <div class="row">
                <!-- LEFT SIDE -->
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label fw-semibold">Product Name</label>
                    {{ form.name }}
                  </div>

                  <div class="mb-3">
                                        {{ form.description.label_tag }}
                                        {{ form.description }}
                                        {% if form.description.errors %}
                                            <div class="text-danger">{{ form.description.errors }}</div>
                                        {% endif %}
                                        </div>

                  <div class="mb-3">
                    <label class="form-label fw-semibold">Price</label>
                    {{ form.price }}
                  </div>

                  <div class="mb-3">
                    <label class="form-label fw-semibold">Stock</label>
                    {{ form.stock }}
                  </div>
                </div>

                <!-- RIGHT SIDE -->
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label fw-semibold">Product Image</label><br>
                    {% if form.instance.product_image %}
                      <img src="{{ form.instance.product_image.url }}" alt="{{ form.name.value }}" class="img-thumbnail mb-2" width="200">
                    {% endif %}
                    {{ form.product_image }}
                  </div>

                  <div class="mb-3">
                    <label class="form-label fw-semibold">Active Status</label><br>
                    {{ form.is_active }}
                  </div>

                  <div class="d-flex mt-4">
                    <button type="submit" class="btn btn-success me-2 px-4">ðŸ’¾ Save</button>
                    <a href="{% url 'product_list' %}" class="btn btn-secondary px-4">â†© Back</a>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
  
</div>
{% endblock %}
{% block script %} 
<!-- âœ… CKEditor 5 Classic Build (CDN) -->
<script src="https://cdn.ckeditor.com/ckeditor5/41.0.0/classic/ckeditor.js"></script>

<script>
  // Initialize CKEditor on the description field
  document.addEventListener("DOMContentLoaded", function() {
      const textarea = document.querySelector('#id_description');
      if (textarea) {
          ClassicEditor.create(textarea, {
              toolbar: [
                  'heading', '|',
                  'bold', 'italic', 'underline', 'strikethrough', '|',
                  'bulletedList', 'numberedList', '|',
                  'link', 'blockQuote', '|',
                  'undo', 'redo'
              ]
          })
          .catch(error => {
              console.error('Error initializing CKEditor:', error);
          });
      }
  });
</script>

{% endblock script %}
